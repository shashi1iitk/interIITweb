{% extends "layout.html" %}

{% block body %}

<script type="text/javascript">

function myFunction() {
  window.location.href = '/showCandidates';
}

function delet(id){
    console.log(id);
    swal({
  title: "Are you sure?",
  text: "Once deleted, candidate will be deregistered and all his/her provided details will be lost!",
  icon: "warning",
  buttons: true,
  dangerMode: true,
})
.then((willDelete) => {
  if (willDelete) {

    $.ajax({
            data : id,
            type : 'POST',
            url : '/deletePlayer',
            contentType: false,
            cache: false,
            processData: false,
            async: false
        })
        .done(function(id){
            // console.log(id);
            swal("Poof! Candidate Removed!", {
              icon: "success",
            });
            setTimeout(myFunction, 1500);
            
        });

    
  } else {

  }
});



    
}



</script>

<div class="container" style="margin-top: 3%">

    <br><br>
    <center><h1>Logged in as : {{current_user.role}}</h1></center>
    <hr>
    <h3>Instruction</h3>
    <p>For changing or modifying any entry, please delete the previous one and add a new one.</p>
    <center><button type="button" class="btn btn-success" onclick="window.location.href = '/register'; ">Add Player/Staff</button></center>
    <br><br>
    <center><h2>Players</h2></center>
    {% for param in params: %}
    <div class="alert alert-info" style="padding: 20px;">
        <strong>{{param[0].name}} | {{param[0].email}} | {{param[0].roll_no}}</strong>  <br> {{param[1]}}
        <button type="button" class="btn btn-danger float-right" onclick="delet({{param[0].id}});">Delete</button>
    </div>
    {% endfor %}
    <hr>
    <center><h2>Staffs</h2></center>
    {% for staff in staffs: %}
    <div class="alert alert-info" style="padding: 20px;">
        <strong>{{staff.name}} | {{staff.email}} | {{staff.roll_no}}</strong>
        <button type="button" class="btn btn-danger float-right" onclick="delet({{staff.id}});">Delete</button>
    </div>
    {% endfor %}
    <hr>

</div>

<script src="{{ url_for('static', filename='lib/mobile-nav/mobile-nav.js') }}"></script>

{% endblock %}